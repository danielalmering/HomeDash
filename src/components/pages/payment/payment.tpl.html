<main class="payment">
    <div class="container-fluid">

        <form class="row" v-on:submit.prevent="submitPurchase">

            <div class="payment__title">
                <i class="fa fa-check active"></i>
                <span v-t="'payment.pickpackage'"></span>
            </div>

            <div class="payment__package">
                <ul>
                    <li v-for="(package, key) in packages" v-on:click="addPackage(package)" :class="colums">
                        <div class="payment__package-item" :class="package.title.replace(/\s+/g, '_')">
                            <span v-if="key == '1'" class="mostlybought">{{ $t('payment.mostlybought') }}</span>
                            <h2>
                                <span v-t="'payment.packages.pack' + package.id"></span>
                                <i v-if="package.id === 0">*</i>
                            </h2>
                            <span class="time" v-if="package.minutes < 60">{{ $t('payment.minutes', { minutes: Math.floor(package.minutes) }) }}</span>
                            <span class="time" v-if="package.minutes >= 60">{{ $t('payment.hours', { minutes: Math.floor((package.minutes / 60)) }) }}</span>
                            <span class="credits">{{ package.quantity }}</span>
                            <span v-t="'payment.credits'"></span>
                            <span class="price">{{ package.price | currency }}</span>
                            <span class="plus"></span>
                            <span class="desc" v-if="package.id === 0" v-t="'payment.bonusdesc'"></span>
                        </div>
                    </li>
                </ul>
            </div>

            <div class="payment__title">
                <i class="fa fa-shopping-cart"></i>
                <span v-t="'payment.shoppingcart'"></span>
            </div>

            <div class="payment__cart">
                <table>
                    <tr>
                        <th v-t="'payment.product'"></th>
                        <th v-t="'payment.quanity'"></th>
                        <th v-t="'payment.creditscap'"></th>
                        <th v-t="'payment.price'"></th>
                        <th></th>
                    </tr>
                    <tr v-for="(value, key) in selectedPackages" v-if="value > 0">
                        <td>{{ package(key).title }}</td>
                        <td>{{ value }}</td>
                        <td>{{ package(key).quantity }}</td>
                        <td>{{ package(key).price | currency }}</td>
                        <td><i class="fa fa-remove" v-on:click="clearSelection(key)"></i></td>
                    </tr>
                </table>

                <div class="col-xs-12 col-sm-7">
                    <p v-t="'payment.bonusdiscountdesc'"></p>
                    <br />

                    <div class="payment__cart-form form" v-if="promoData && promoData.active">
                        <input type="text" :placeholder="$t('payment.discountcode')" v-model="promoCode">
                        <i class="fa fa-share" v-on:click="verifyPromo"></i>
                    </div>

                </div>

                <div class="col-xs-12 col-sm-5">
                    <div class="payment__cart-subtotal">
                        <div class="row">
                            <div class="col-xs-6">
                                <span v-t="'payment.subtotal'"></span>
                                <span v-t="'payment.bonuscredits'"></span>
                                <span v-t="'payment.totalcredits'"></span>
                                <span v-if="credits != 0" v-t="'payment.newbalance'"></span>
                                <span v-t="'payment.total'"></span>
                            </div>
                            <div class="col-xs-6 text-right">
                                <span>{{ credits }}</span>
                                <span>{{ bonusAmount(credits) }}</span>
                                <span>{{ credits + bonusAmount(credits) }}</span>
                                <span v-if="credits != 0">{{ user.credits + credits + bonusAmount(credits) }}</span>
                                <p>{{ totalAmount | currency }}</p>
                            </div>
                            <div class="col-xs-12" v-if="nextBonus && info && !info.marketing.current">
                                <div class="payment__cart-bonus">
                                    {{ $t('payment.bonusbanner', { credits: nextBonus.amount, percentage: nextBonus.percentage }) }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="clearfix"></div>
            </div>

            <div class="payment__title">
                <i class="fa fa-money"></i>
                <span v-t="'payment.methodes'"></span>
            </div>

            <div class="payment__method">
                <ul>
                    <li class="col-xs-12 col-sm-4" v-for="paymentMethod in paymentMethods">
                        <a v-on:click="selectPayment(paymentMethod.abbr)">
                            <div class="payment__method-item" :class="{ 'special': paymentMethod.abbr === selectedPayment }" :id="paymentMethod.abbr.replace(/\//g, '-')">
                                <i></i>
                                <span></span>
                                <div v-if="user.country === 'de'">
                                    <p></p>
                                    <img v-if="paymentMethod.abbr === 'SOFORT'" width="70" src="../../../assets/images/tuv2.png" />
                                </div>
                            </div>
                            <div class="payment__method-name">
                                {{ $t('payment.paywith') }} {{ $t('payment.methods.' + paymentMethod.info) }}
                                <span v-if="!paymentMethod.addBonus">*</span>
                            </div>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="payment__finish">

                <button type="submit" :disabled="!paymentDisabled" :class="{ 'btn-disabled': !paymentDisabled }" class="btn btn-xxl btn-orange" v-t="'payment.paying'"></button>

                <img src="../../../assets/images/comodo.png" />

            </div>
        </form>

    </div>
</main>